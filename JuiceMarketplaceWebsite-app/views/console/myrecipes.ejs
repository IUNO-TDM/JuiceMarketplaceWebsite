<html>
    <head>
        <% include ./partials/head %>
        <!--css-->
        <link href="css/c3.css" rel="stylesheet" type="text/css"/>
        <link href="css/tiles.css" rel="stylesheet">
        <!-- angular init -->
        <script src="app/app.js"></script>

        <!-- servcies -->
        <script src="app/services/myrecipes-data-service.js"></script>

        <!-- controller -->
        <script src="app/controller/myrecipes-controller.js"></script>
        <script>
            $(function () {
                    angular.element(document).ready(function () {
                        angular.bootstrap(document, ['myrecipes']);
                    })

                }
            )
        </script>
    </head>
    <body>
        <% include ./partials/sidebar %>
        <div id="main">
            <header>
                <% include ./partials/header %>
            </header>
            <div ng-controller="MyRecipesController" class="container" ng-init="getRecipesForUser()">
                <h2>Deine Getränke</h2>
                <table>
                    <tr >
                        <td></td>
                        <td></td>
                    </tr>
                </table>
                <%if ((typeof errorMaxRecipes !== typeof undefined) && errorMaxRecipes) { %>
                <div id="failure_alert" class="alert alert-danger">
                    Derzeit ist die Anzahl an Rezepten pro Benutzer begrenzt. Bitte lösche ein bestehendes Rezept, falls du weitere Rezepte auf dem Marktplatz veröffentlichen willst.
                </div>
                <% } %>
                <div class="table-responsive">
                    <table class="table table-bordered table-striped" >
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>Getränkename</th>
                            <th>Gesamtumsatz <small>(IUNOs)</small></th>
                            <th>Lizenzgebühr <small>(IUNOs)</small></th>
                            <th>Komponenten</th>
                            <th>Beschreibung</th>
                            <th>Aktion</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="x in technologydataForUser | orderBy: '-revenue'">
                            <td>{{$index + 1}}</td>
                            <td>{{ x.technologydataname }}</td>
                            <td>{{ (x.revenue / 1).toFixed(2) }}</td>
                            <td>{{(x.licensefee / 100000).toFixed(2)}}</td>
                            <td>
                                <ul >
                                    <li ng-repeat="y in x.componentlist">{{y}} </li>
                                </ul>
                            </td>
                            <td>{{ x.technologydatadescription}}</td>
                            <td><div class="btn-group">
                                <button type="button" class="btn btn-primary" ng-click="deleteRecipe(x.technologydatauuid)">Löschen</button>
                            </div></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <footer>
                <% include ./partials/footer %>
            </footer>
        </div>
    </body>
</html>
